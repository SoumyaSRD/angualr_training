<div class="app-container" [class.dark-theme]="themeService.isDarkTheme()">
  <mat-toolbar class="app-toolbar mat-elevation-z4">
    <div class="toolbar-left">
      <button
        mat-icon-button
        (click)="drawer.toggle()"
        class="menu-button"
        matTooltip="Toggle menu"
        aria-label="Toggle navigation menu"
      >
        <mat-icon>menu</mat-icon>
      </button>

      <div class="brand-section" [routerLink]="['/']" style="cursor: pointer">
        <mat-icon class="brand-icon">code</mat-icon>
        <div class="brand-text">
          <h1 class="app-title">Angular Academy</h1>
          <span class="app-subtitle">Professional Training Program</span>
        </div>
      </div>
    </div>
  </mat-toolbar>

  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav
      #drawer
      [mode]="isMobile ? 'over' : 'side'"
      [opened]="!isMobile"
      class="sidenav mat-elevation-z1"
    >
      <div class="sidenav-content">
        <mat-accordion multi class="navigation-accordion">
          @for (topic of navigationService.topics; track topic.title) {
          <mat-expansion-panel [expanded]="isTopicActive(topic)">
            <mat-expansion-panel-header class="panel-header">
              <mat-panel-title class="panel-title">
                <mat-icon
                  class="topic-icon"
                  [class.active]="isTopicActive(topic)"
                >
                  {{ topic.icon }}
                </mat-icon>
                <span class="topic-title">{{ topic.title }}</span>
                <!-- @if (getTopicProgress(topic) > 0) {
                <span
                  class="topic-progress"
                  [class.completed]="getTopicProgress(topic) === 100"
                >
                  {{ getTopicProgress(topic) }}%
                </span>
                } -->
              </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-nav-list dense class="subtopic-list">
              @for (subTopic of topic.subTopics; track subTopic.route) {
              <a
                mat-list-item
                [routerLink]="subTopic.route"
                (click)="onNavClick()"
                [class.active]="isRouteActive(subTopic.route)"
                class="subtopic-item"
              >
                <mat-icon class="subtopic-icon">chevron_right</mat-icon>
                <span class="subtopic-title">{{ subTopic.title }}</span>
                @if (isCompleted(subTopic.route)) {
                <mat-icon class="completed-icon" color="primary"
                  >check_circle</mat-icon
                >
                }
              </a>
              }
            </mat-nav-list>
          </mat-expansion-panel>
          }
        </mat-accordion>
      </div>
    </mat-sidenav>

    <mat-sidenav-content class="main-content">
      @if (currentRoute){
      <div class="breadcrumb">
        <a [routerLink]="['/']" class="breadcrumb-home">
          <mat-icon>home</mat-icon>
        </a>
        <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
        <span class="breadcrumb-item">{{ currentRoute }}</span>
      </div>
      }

      <div class="content-wrapper">
        <router-outlet></router-outlet>
      </div>

      <footer class="app-footer">
        <div class="footer-content">
          <div class="footer-section">
            <h3 class="footer-title">Angular Academy</h3>
            <p class="footer-description">
              Master Angular with our comprehensive professional training
              program. From fundamentals to advanced concepts.
            </p>
          </div>

          <div class="footer-section">
            <h4 class="footer-subtitle">Resources</h4>
            <div class="footer-links">
              <a
                href="https://angular.dev"
                target="_blank"
                rel="noopener"
                class="footer-link"
              >
                <mat-icon>description</mat-icon>
                Angular Docs
              </a>
              <a
                href="https://github.com/angular/angular"
                target="_blank"
                rel="noopener"
                class="footer-link"
              >
                <mat-icon>code</mat-icon>
                GitHub
              </a>
              <a
                href="https://angular.io/guide/cheatsheet"
                target="_blank"
                rel="noopener"
                class="footer-link"
              >
                <mat-icon>school</mat-icon>
                Cheat Sheet
              </a>
            </div>
          </div>

          <div class="footer-section">
            <h4 class="footer-subtitle">Contact</h4>
            <div class="footer-links">
              <a href="mailto:support@angularacademy.com" class="footer-link">
                <mat-icon>mail</mat-icon>
                support@angularacademy.com
              </a>
              <a href="#" class="footer-link">
                <mat-icon>help</mat-icon>
                Help Center
              </a>
            </div>
          </div>
        </div>

        <div class="footer-bottom">
          <p class="copyright">Â© 2026 Angular Academy. All rights reserved.</p>
          <div class="social-links">
            <a href="#" class="social-link" aria-label="Twitter">
              <mat-icon>twitter</mat-icon>
            </a>
            <a href="#" class="social-link" aria-label="GitHub">
              <mat-icon>code</mat-icon>
            </a>
            <a href="#" class="social-link" aria-label="LinkedIn">
              <mat-icon>linkedin</mat-icon>
            </a>
          </div>
        </div>
      </footer>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
